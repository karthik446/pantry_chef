# Message Schemas

This document defines the JSON schemas for messages used in the Recipe Agent Platform.

## `workflow_initiate` Message Schema

This message is published to the `workflow_commands` queue to initiate a workflow in the `RecipeAgentService`.

```json
{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "title": "WorkflowInitiateMessage",
  "description": "Message to initiate a workflow in the Recipe Agent Service",
  "type": "object",
  "properties": {
    "workflow_id": {
      "type": "string",
      "format": "uuid",
      "description": "Unique identifier for the workflow instance.  This can be pre-generated by the API or generated by the RecipeAgentService if not provided."
    },
    "workflow_type": {
      "type": "string",
      "enum": ["recipe_workflow_full"],
      "description": "Type of workflow to initiate. For MVP, only 'recipe_workflow_full' is supported."
    },
    "workflow_payload": {
      "type": "object",
      "description": "Payload data specific to the workflow type.",
      "properties": {
        "search_query": {
          "type": "string",
          "description": "Search query for recipe search (required for recipe_workflow_full)."
        },
        "number_of_recipes": {
          "type": "integer",
          "description": "Number of recipes to search for (optional, default is 10)."
        }
      },
      "required": ["search_query"]
    }
  },
  "required": ["workflow_type", "workflow_payload"]
}
```

**Explanation of the Schema:**

*   **`$schema`**:  Specifies the JSON Schema draft version.
*   **`title`**:  A descriptive title for the schema.
*   **`description`**:  A brief description of the message's purpose.
*   **`type: "object"`**:  Indicates that the message itself is a JSON object.
*   **`properties`**:  Defines the fields within the message object:
    *   **`workflow_id`**:
        *   `type: "string"`:  It's a string.
        *   `format: "uuid"`:  Should be a UUID format.
        *   `description`:  Explains its purpose.
    *   **`workflow_type`**:
        *   `type: "string"`:  It's a string.
        *   `enum: ["recipe_workflow_full"]`:  For MVP, only `recipe_workflow_full` is allowed.  This uses an enumeration to restrict the possible values.
        *   `description`: Explains the workflow type.
    *   **`workflow_payload`**:
        *   `type: "object"`:  It's a nested JSON object.
        *   `description`:  Explains that this holds workflow-specific data.
        *   **`properties` (within `workflow_payload`)**:
            *   **`search_query`**:
                *   `type: "string"`: It's a string.
                *   `description`: Explains it's the search query.
        *   `required: ["search_query"]`:  `search_query` is mandatory within the `workflow_payload` for `recipe_workflow_full`.
    *   **`required: ["workflow_type", "workflow_payload"]`**:  `workflow_type` and `workflow_payload` are mandatory fields in the main message object.

**Your Task:**

1.  Create the file `agentic_platform/docs/message-schemas.md`.
2.  Copy and paste the markdown content above into this file.
3.  Review the schema definition. Does it look good to you?  Do you want to make any changes at this stage?

Once you've created the file and reviewed the schema, please let me know, and we can move on to Task 1.2!